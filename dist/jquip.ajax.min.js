$.addPlugin("ajax",function(c){var h=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("MSXML2.XMLHTTP.3.0")},function(){return new ActiveXObject("MSXML2.XMLHTTP")}],f=null;c.xhr=function(){if(null!=f)return f();for(var a=0,b=h.length;a<b;a++)try{var d=h[a],c=d();if(null!=c)return f=d,c}catch(g){}return function(){}};c._xhrResp=function(a){switch(a.getResponseHeader("Content-Type").split(";")[0]){case "text/xml":return a.responseXML;
case "text/json":case "application/json":case "text/javascript":case "application/javascript":case "application/x-javascript":return window.JSON?JSON.parse(a.responseText):eval(a.responseText);default:return a.responseText}};c._formData=function(a){var b=[],c=/%20/g,e;for(e in a)b.push(encodeURIComponent(e).replace(c,"+")+"="+encodeURIComponent(a[e].toString()).replace(c,"+"));return b.join("&")};c.ajax=function(a){var b=c.xhr(),d,e=0,a=c.extend({userAgent:"XMLHttpRequest",lang:"en",type:"GET",data:null,
dataType:"application/x-www-form-urlencoded"},a);a.timeout&&(d=setTimeout(function(){b.abort();a.timeoutFn&&a.timeoutFn(a.url)},a.timeout));b.onreadystatechange=function(){4==b.readyState?(d&&clearTimeout(d),300>b.status?a.success&&a.success(c._xhrResp(b)):a.error&&a.error(b,b.status,b.statusText),a.complete&&a.complete(b,b.statusText)):a.progress&&a.progress(++e)};var g=a.url,f=null,h="POST"==a.type||"PUT"==a.type;!h&&a.data&&(g+="?"+c._formData(a.data));b.open(a.type,g);h&&(f=(g=0<=a.dataType.indexOf("json"))?
JSON.stringify(a.data):c._formData(a.data),b.setRequestHeader("Content-Type",g?"application/json":"application/x-www-form-urlencoded"));b.send(f)};c.getJSON=function(a,b,d,e){c.isFunction(b)&&(e=d,d=b,b=null);c.ajax({url:a,dataType:"json",data:b,success:d,error:e})}});